---
output: html_document
editor_options: 
  chunk_output_type: console
---

# General description of workflow

## Steps

### Consolidate input data

```{sh}
#| eval: false
source $HOME/proyectos/Tropical-Glaciers/T6.1-tropical-glaciers-suitability-model/env/project-env.sh
cd $WORKDIR
## load modules for gdal functions
#module purge
module load gdal/3.5.3-szip  r/4.2.2

Rscript --vanilla $SCRIPTDIR/inc/R/00-prepare-dataframe.R
```

### Run models for each unit

```{sh}
#| eval: false
source $HOME/proyectos/Tropical-Glaciers/T6.1-tropical-glaciers-suitability-model/env/project-env.sh
cd $WORKDIR
## fool qsub to send only one job
#qsub -J 2-3:4 $SCRIPTDIR/inc/pbs/02-run-gbm-model-per-TG-unit.pbs 
qsub -J 1-16 $SCRIPTDIR/inc/pbs/02-run-gbm-model-per-TG-unit.pbs
```


```{sh}
#| eval: false
tree $GISOUT/$PROJECTNAME
```

### Calculate Relative Severity


```{sh}
#| eval: false
Rscript --no-restore --no-save $SCRIPTDIR/inc/R/03-create-output-table-for-data-upload.R
```


### Read mass balance model results


```{sh}
#| eval: false
Rscript --no-restore --no-save $SCRIPTDIR/inc/R/06-massbalance-model-results.R
```

### Upload data to cloud repository
```{sh}
#| eval: false
Rscript --no-restore --no-save $SCRIPTDIR/inc/R/10-upload-files-to-OSF.R overwrite
Rscript --no-restore --no-save $SCRIPTDIR/inc/R/11-download-files-from-OSF.R overwrite
```

### Visualise results

